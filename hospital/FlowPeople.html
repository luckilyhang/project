<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <link href="css/Common/MuiCss/mui.min.css" rel="stylesheet" />
    <script src="js/jquery-1.5.2.min.js"></script>
    <style>
        html,
        body { height: 100%;}
        #input { 
            width:100%;
            background-color:#fafafa;
        }

        /*.mui-search input[type=search] { width: 100% !important; }
        .mui-bar { -webkit-box-shadow: none; box-shadow: none; }
        .mui-table-view { cursor: pointer !important; }
        .mui-indexed-list-search .mui-input-row .mui-search { pointer-events: none !important; }
        .mui-input-clear .mui-indexed-list-search-input { -webkit-user-select: auto !important; }*/
    </style>
</head>
<body>
    <header class="mui-bar mui-bar-nav" >
        <span style="width:32%;display:inline-block;height:100%;line-height:44px;color:#3295fa" onclick="cancel()">取消</span>
        <span style="display:inline-block;width:35%;text-align:center;height:100%;line-height:44px;">人员列表</span>
        <span style="width:30%;display:inline-block;float:right;text-align:right;height:100%;line-height:44px;color:#3295fa" onclick="confirm()">确定</span>
    </header>
    <div class="mui-content">
        <div id='list' class="mui-indexed-list">
            <div class="mui-indexed-list-search mui-input-row mui-search">
                <input type="search" class="mui-input-clear mui-indexed-list-search-input" id="input" placeholder="搜索">
        
            </div>
            <div id="selected" class="">
                <!--<div>
                    <span style="margin-left:33%;margin-right:2%;display:inline-block">0000住院总</span>
                    <img src="img/guanbi@2x.png" onclick="closePeople(this)" />
                </div>-->
            </div>
            <div class="mui-indexed-list-bar"  style="display:none">
                <!--<a>A</a>
                <a>B</a>-->
            </div>
            <div class="mui-indexed-list-alert"></div>
            <div class="mui-indexed-list-inner">
                <!--<div class="mui-indexed-list-empty-alert">没有数据</div>-->
                <ul class="mui-table-view" id="content"></ul>
            </div>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="js/Common/ajax.js"></script>
   
    <script src="js/Common/mui-people.js"></script>
    <script type="text/javascript" charset="utf-8">
        //mui.init();
        //mui.ready(function () {
            var header = document.querySelector('header.mui-bar');
            //var list = document.getElementById('list');
            //calc hieght
            //list.style.height = (document.body.offsetHeight - header.offsetHeight) + 'px';
            //create
        //    window.indexedList = new mui.IndexedList(list);
        //});
        function selectPeople(ele) {
            if (JSON.parse(ele.getAttribute("data-all")).vCode) {
                if (JSON.parse(ele.getAttribute("data-all")).vCode == JSON.parse(localStorage.getItem("PreSQ")).vCode) {
                    alert("随从人员不能选择带队者");
                    return;
                }
            } else {
                if (JSON.parse(ele.getAttribute("data-all")).jobnumber == localStorage.getItem("jobNum")) {
                    alert("随从人员不能选择带队者");
                    return;
                }
            }
            ele.className="mui-table-view-cell mui-indexed-list-item mui-active";
            var ss = $('<div data-all=\'' + ele.getAttribute("data-all") + '\' class="selected"><span style="margin-left:33%;margin-right:2%;display:inline-block">' + ele.innerText + '</span><img src="img/guanbi@2x.png" onclick="closePeople(this)" /></div>');
            $("#selected").append(ss);
        }
        function closePeople(ele) {
            $(ele.parentNode).remove();
        }
        function cancel(ele) {
            history.back(-1);
        }
        function confirm(ele) {
            var selected = document.getElementById("selected").children;
            var arrays = JSON.parse(localStorage.getItem("flows"));
            for (var i = 0; i < selected.length; i++){
                arrays.push(selected[i].getAttribute("data-all"));
            }
            if (GetQueryString("depid")) {
                localStorage.setItem('flows_pre', JSON.stringify(arrays));
            } else {
                localStorage.setItem('flows', JSON.stringify(arrays));
            }
            console.log(localStorage.getItem('flows'));
            history.back(-1);
        }

    </script>
</body>

</html>